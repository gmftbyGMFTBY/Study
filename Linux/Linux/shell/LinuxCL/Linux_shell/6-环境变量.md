### 环境变量

Linux下的环境变量和自定义用户的shell体验

环境变量用来存储有关shel会话和工作环境的信息,允许在内存中使用数据(环境变量读取到内存中)

#### 建立环境变量

* 全局环境变量

  1. 全局环境变量对于当前及其子shell都适用和可见
  2. 可以用来让子shell获取父shell的信息
  3. **系统环境变量**标准规范是统一大写

  ```bash
  env    # 显示全部环境变量
  printenv NAME    # printenv命令可以打印出环境变量的具体值
  echo $NAME    # echo一样可以用来输出环境变量
  ```


* 局部环境变量

  1. 只有当前创建的shell(进程)才有效
  2. 分类
     * 系统局部变量
     * 用户自定义局部变量

  ```bash
  set    # linux并没有查看局部环境变量的命令,但是set命令可以查看当前特定进程(shell)的所有的环境变量(包括系统环境变量,系统局部变脸,用户自定义变量)并且按照结果排序
  ```

按照用户分类

* 系统环境变量

  下面我们已经看到了,局部变量是没有办法导入到其他的shell中去的,所以	我们这里引入了**导出机制**

  1. 导出机制允许我们讲局部比那里那个设置为全局变量
  2. 全局环境变量在当前进程及其子进程中都可见
  3. 子shell中对全局环境变量做的改动在父进程中无法体现,甚至子进程导出的变量父进程也无法接收,甚至是删除(子进程永远无法影响父进程)

  ```bash
  export local_variable    # 讲局部变量导出到全局变量
  ```

* 用户自定义变量

  用户自定义变量尽量使用小写,和系统环境变量作为区分

  ```bash
  my_variable='...'    # 设定用户自定义变量,取值是数字或者字符串
  ```

  1. 用户当前进程(shell)中的局部变量是不能继承给子shell的
  2. 子shell定义中的局部变量,父进程也无法调用

#### 删除环境变量

```bash
unset variable    # 删除环境变量,依然无法影响父进程l
```

#### 默认的shell环境变量

具体查表,**只需要记住有些环境变量并没有值**

#### PATH环境变量

我们在shell中输入命令的时候,系统就会在我们的PATH环境变量中去搜索对应的目录地址,如果找到了就执行,否则返回`No such file`类似错误

或者使用绝对路径执行(不怕累就多敲敲键盘吧)

1. 修改环境变量

   ```bash
   PATH=$PATH:DIR_PATH    # 添加环境变量
   PATH=$PAHT:.    # 通常将当前工作陌路加入环境变量中
   ```

2. 生命周期 : 维持到当前shell的结束

#### 环境变量配置文件

我们之前讨论的是如何讲环境变量设置好，我们现在考虑如何持久化这些设置

1. 启动文件：

   当我们启动一个bash shell的时候，默认的bash会在几个文件中查找配置信息，具体查找哪个文件取决于我们的启动bash的方式

   * 登录默认的shell
   * 非登录的交互式shell
   * 运行脚本的非交互式shell

2. 登录默认shell

   系统的每个用户登陆的时候都会执行的启动文件

   只要登录了linux系统就会执行其中的`/etc/profile`文件中的命令

   ```
   /etc/profile中的/etc/bash.bashrc文件中包含着系统环境变量
   ```

3. $HOME目录下的启动文件

   1. 主要是`.bashrc`文件，系统在每次启动shell进程的时候会自动读取这些文件中的环境变量配置
   2. `.bashrc`文件中可以**记录别名**并且还可以记录私人定义的脚本函数等等
   3. 如果shell是非交互式的脚本执行的话，我们的机制有必要说明一下
      * BASH_ENV环境变量存储我们的非交互式的执行的脚本，但是通常都是未设定值
      * 非交互式的执行中
        1. 在子进程中运行的脚本的环境变量继承自父进程的环境变量获取
        2. 不产生子进程的脚本采用当前shell的局部变量和全局变量
   4. 通常情况下，我们将用户自定义的环境变领存储在`.bashrc`文件中(`.bashrc`是在启动交互式shell的时候默认读取的)